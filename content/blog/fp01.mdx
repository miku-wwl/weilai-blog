---
title: Introducing Functional Programming
description: Introducing Functional Programming
date: 2024-05-08
tags: ["code", "rehype pretty", "mdx"]
published: true
---

### What is functional programming?

函数式编程（Functional Programming，简称 FP）是一种编程范式，其中函数扮演核心角色。在函数式编程中，函数成为程序员工具箱中的主要元素。我们的程序将由函数构成，这些函数以各种方式串联起来，以执行越来越复杂的任务。这些函数往往较小且具有模块化特性。

这与面向对象编程（Object-Oriented Programming, OOP）形成对比，在 OOP 中，对象占据中心地位。虽然在 OOP 中也使用函数，但它们的通常用途是改变对象的状态，并且这些函数通常绑定到某个对象上，从而形成诸如 someObject.doSomething()这样的调用模式。在这些语言中，函数被视为辅助性的元素；它们用于服务于对象的功能，而不是为了函数本身的目的而使用。

在函数式编程中，引入了“一等函数”的概念。这意味着函数被当作与传统面向对象语言中对象相似的方式来处理。函数可以被绑定到变量名上，可以作为参数传递给其他函数，甚至可以作为函数的返回值。实质上，函数被当作任何其他“类型”一样对待。函数与类型的这种等价性，正是函数式编程力量的源泉。

### What are pure functions?

纯函数是函数式编程中的一个核心概念，通常与纯粹函数式编程相联系。人们有时认为函数式编程更多地停留在学术领域，与实际工业应用关联不大，这一观点可能源于函数式编程被认为比面向对象编程更为复杂且不够成熟。尽管函数式编程起源于学术界，但其核心概念能够应用于许多行业问题解决中。

经常有人觉得函数式编程比传统的面向对象编程更复杂。我认为这是一种误解。很多时候，当人们提到函数式编程时，他们实际上指的是纯粹的函数式编程。纯粹的函数式程序是函数式编程的一个子集，其中每个函数都必须是纯函数——它不能改变系统的状态或产生任何副作用。因此，纯函数是完全可预测的：给定相同的一组输入，它将始终产生相同的一组输出。这样，我们的程序变得完全确定性。

本书将关注函数式编程，而不将其限定为“纯粹”函数式编程这一更严格的子集。这并不是说纯净性没有价值。在纯粹的函数式语言中，函数是完全确定性的，调用它们不会改变系统的状态。这使得代码更容易调试和理解，提高了可测试性。第 6 章专门讨论函数的纯净性，因为它能为我们的程序带来巨大价值。然而，从代码库中根除所有副作用往往得不偿失。本书的目标是帮助您以提高可读性的方式编写代码，因此，我们经常需要在（纯粹）函数式风格与更为宽松的函数式风格之间做出权衡。

为了简要抽象地说明函数纯净性是什么，考虑以下示例。假设我们有一个名为 Person 的结构体，其中包含一个 Name 字段。我们可以创建一个函数来更改此人的名字，比如 changeName。实现这个功能有两种方法：

- 我们可以创建一个函数，它接收一个对象，将名称字段的内容更改为新名称，但不返回任何内容。
- 我们也可以创建一个函数，它接收一个对象并返回一个新的对象，新对象应用了所需的变化，而原始对象保持不变。

### Comparing FP and OOP

函数式编程并非新事物，实际上它的出现早于面向对象范式几十年。Go 语言支持多种编程范式，我们可以同时采用这两种编程风格，但让我们快速对比一下两者之间的具体差异。

| 函数式编程       | 面向对象编程         |
| ---------------- | -------------------- |
| 函数是基本构建块 | 类和对象是基本构建块 |
| 声明式编码       | 过程式编码           |
| 偏好不可变性     | 支持可变状态         |
| 可强制纯净性     | 往往不着重纯净性     |
| 递归             | 循环                 |

函数式编程（左侧）与面向对象编程（右侧）的对比

这个对比略显表面化。许多面向对象的语言也具有递归的概念，但递归并不总是语言设计的核心。同样，面向对象的代码可以通过封装可变状态并尽可能实现不可变性来工作。

在当今世界，即使是我们传统上认为的面向对象语言，比如 Java，实际上也越来越支持多范式编程。

顺带一提，这个对比可能让人感觉只有三种可能的编程范式：函数式、面向对象或多范式。虽然这些确实是目前最普遍的，但还有其他编程范式，如文学编程、逻辑编程和响应式编程等。

由于面向对象编程是这一领域的主要参与者，也是大多数读者较为熟悉的，因此本书将重点进行面向对象编程与函数式编程的对比。
